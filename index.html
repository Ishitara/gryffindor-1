<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <link rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
      integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
      crossorigin="anonymous">
    <link rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"
      integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
      crossorigin="anonymous">
    <link href="stylecheckbox.css" rel="stylesheet"></link>
    <link href="style.css" rel="stylesheet"></link>
    <title>Gryffindor</title>
  </head>
  <body class="row">
    <aside id="user-options" class="col-3">
      <div class="header text-center" id="headerColor">
        <h1 class="mb-0 py-3"><i class="fas fa-globe"></i>Gryffindor<i class="fas fa-globe"></i></h1>
      </div>
      <form id="coordinates" class="m-3"></form>
      <hr />
      <div id="location-details" class="mx-3"></div>
      <div class="d-flex flex-column">
        <div class="row align-items-start mr-0">
          <div id="options" class="col-4 mx-3">

            <span class="badge badge-info">Water 1</span>
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <label class="switch">
                    <input type="checkbox" onclick="if(this.checked){showWater1()} else{hideWater1()}">
                    <span class="slider round"></span>
                  </label>
                </div>
              </div>
              <input type="text" id="water1" class="form-control" aria-label="Text input with checkbox">
            </div>
            <span class="badge badge-info">Water 2</span>
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <label class="switch">
                    <input type="checkbox" onclick="if(this.checked){showWater2()} else{hideWater2()}">
                    <span class="slider round"></span>
                  </label>
                </div>
              </div>
              <input type="text" id="water2" class="form-control" aria-label="Text input with checkbox">
            </div>
            <span class="badge badge-info">Water 3</span>
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <label class="switch">
                    <input type="checkbox"  onclick="if(this.checked){showWater3()} else{hideWater3()}">
                    <span class="slider round"></span>
                  </label>
                </div>
              </div>
              <input type="text" id="water3" class="form-control" aria-label="Text input with checkbox">
            </div>
            <span class="badge badge-info">Water 4</span>
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <label class="switch">
                    <input type="checkbox"  onclick="if(this.checked){showWater4()} else{hideWater4()}">
                    <span class="slider round"></span>
                  </label>
                </div>
              </div>
              <input type="text" id="water4" class="form-control" aria-label="Text input with checkbox">
            </div>
            <span class="badge badge-info">Water 5</span>
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <label class="switch">
                    <input type="checkbox"  onclick="if(this.checked){showWater5()} else{hideWater5()}">
                    <span class="slider round"></span>
                  </label>
                </div>
              </div>
              <input type="text" id="water5" class="form-control" aria-label="Text input with checkbox">
            </div>
            
          </div>
        </div>
      </div>
    </aside>

    <div id="map" class="col"></div>
    <footer>
      <p class="bg-dark text-white text-center p-1 mb-0">
          Copyright <i class="far fa-copyright"></i>2018 Gryffindor
      </p>
    </footer>
    <script src="main.js"></script>
    <script type="text/javascript" src="predicted.js"></script>
    <script>
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 7,
          center: {lat: 34.8021, lng: 38.9968}
        });

        setMarkers(map);
      }

      function setMarkers(map) {
        var image = {
          url: 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',
          size: new google.maps.Size(20, 32),
          origin: new google.maps.Point(0, 0),
          anchor: new google.maps.Point(0, 32)
        };

        var bounds = new google.maps.LatLngBounds();
        for (var i = 0; i < payload.length; i++) {

          var beach = payload[i];
          var marker = new google.maps.Marker({
            position: {lat: beach['Latitude'], lng: beach['Longitude']},
            map: map,
            content: payload[i]['Region'],
            icon: image,
            title: beach['Region'],
            zIndex: null
          });
        
          var infowindow = new google.maps.InfoWindow();
          google.maps.event.addListener(marker, 'click', (function (marker, i, infowindow) {
              return function () {
                console.log("this", payload[i])
                console.log("this", payload[i].Latitude)
                console.log("error", payload[i]['Mean squared error'])
                console.log("error", payload[i]['Population in 2015'])
                console.log("error", payload[i]['Surface water in sq.km'])


                const detailDiv = document.getElementById('location-details');

                if (!detailDiv.children.length) {
                  const header = document.createElement('h2');
                  header.setAttribute('id', 'location-header')
                  header.innerHTML = this.title;
                  detailDiv.appendChild(header);

                  for (let key in payload[i]) {
                    const node = document.createElement('p');
                    node.innerHTML = key + ': ' + payload[i][key];
                    node.setAttribute('id', key)
                    detailDiv.appendChild(node); 
                  }
                } else {
                  const header = document.getElementById('location-header');
                  header.innerHTML = payload[i]['Region'];
                  for (let key in payload[i]) {
                    const node = document.getElementById(key);
                    node.innerHTML = key + ': ' + payload[i][key];
                  }
                }
                

                  infowindow.setContent(this.content);
                  infowindow.open(map, this);
              };
          })(marker, i, infowindow));
          bounds.extend(marker.position);
        }

      }
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDMRz9RilOuyHF78KhFdfW9GgDANQfd78Y&callback=initMap"></script>
    <script src="checkbox.js"></script>
  </body>
</html>
